{"version":3,"sources":["components/UserList/UserList.jsx","components/UserList/Details.jsx","components/FetcherList/FetcherList.jsx","hooks/useJsonFetch.js","constants/urls.js","App.jsx","index.js"],"names":["UserList","children","className","List","users","onUserClick","selectedId","map","id","name","isSelected","UserItem","cn","user_selected","onClick","Details","info","useState","avatar","setAvatar","city","company","position","details","setDetails","useEffect","fetch","process","then","response","json","src","alt","FetcherList","urls","url","i","baseUrl","Fetcher","options","opts","data","setData","loading","setLoading","error","setError","fetchData","a","ok","Error","useJsonFetch","message","JSON","stringify","fetchUrls","App","setUsers","setInfo","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.e49c173f.chunk.js","sourcesContent":["import cn from 'classnames';\n\nexport const UserList = ({ children }) => {\n  return <div className=\"users_container\">{children}</div>;\n};\n\nexport const List = ({ users, onUserClick, selectedId }) => {\n  return (\n    <ul className=\"user_list\">\n      {users.map(({ id, name }) => (\n        <UserItem\n          id={id}\n          name={name}\n          onUserClick={onUserClick}\n          key={id}\n          isSelected={selectedId === id}\n        />\n      ))}\n    </ul>\n  );\n};\n\nconst UserItem = ({ id, name, onUserClick, isSelected }) => {\n  const onClick = () => {\n    onUserClick({ id, name });\n  };\n\n  return (\n    <li\n      className={cn('user_item', { user_selected: isSelected })}\n      id={id}\n      onClick={onClick}\n    >\n      {name}\n    </li>\n  );\n};\n","import { useEffect, useState } from 'react';\n\nexport const Details = ({ info }) => {\n  const [avatar, setAvatar] = useState('');\n  const [details, setDetails] = useState({\n    city: '',\n    company: '',\n    position: '',\n  });\n  // const [isLoading, setIsLoading] = useState(false);\n\n  useEffect(() => {\n    fetch(`${process.env.REACT_APP_USER_DATA_URL}/${info.id}.json`)\n      .then((response) => response.json())\n      .then(({ avatar, details }) => {\n        setAvatar(avatar);\n        setDetails(details);\n      });\n  }, [info]);\n\n  return (\n    <div className=\"details\">\n      <div className=\"img_wrapper\">\n        <img src={avatar} alt=\"User's avatar\" className=\"img_avatar\" />\n      </div>\n      <h3 className=\"details_name\">{info.name}</h3>\n      <ul className=\"user-info_list\">\n        <li className=\"user-info_item\">City: {details.city}</li>\n        <li className=\"user-info_item\">Company: {details.company}</li>\n        <li className=\"user-info_item\">Position: {details.position}</li>\n      </ul>\n    </div>\n  );\n};\n","import { useJsonFetch } from '../../hooks/useJsonFetch';\n\nexport const FetcherList = ({ urls }) => {\n  const baseUrl = process.env.REACT_APP_FETCH_BASE_URL;\n\n  return (\n    <ul className=\"fetcher_list\">\n      {urls.map((url, i) => (\n        <Fetcher url={url} baseUrl={baseUrl} key={i} />\n      ))}\n    </ul>\n  );\n};\n\nconst Fetcher = ({ url, options, baseUrl }) => {\n  const [data, loading, error] = useJsonFetch(`${baseUrl}/${url}`, options);\n\n  return error ? (\n    <div className=\"error\">{error.message}</div>\n  ) : loading ? (\n    <div className=\"loading\">loading...</div>\n  ) : (\n    <div className=\"successful_request\">\n      The data converted to string is: {JSON.stringify(data)}'\n    </div>\n  );\n};\n","import { useEffect, useState } from 'react';\n\nexport const useJsonFetch = (url, opts) => {\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      setLoading(true);\n      try {\n        const response = await fetch(url, opts);\n        if (!response.ok) {\n          throw new Error('Ошибка ответа');\n        }\n        // больше try...catch богу try...catch\n        try {\n          const data = await response.json();\n          setData(data);\n        } catch {\n          throw new Error('Неправильный JSON');\n        }\n        setError(null);\n      } catch (err) {\n        setError(err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchData();\n  }, []);\n\n  return [data, loading, error];\n};\n","// стоило того, чтобы отдельный файл с константами создавать\nexport const fetchUrls = ['data', 'error', 'loading'];\n","import { useEffect, useState } from 'react';\n\nimport { List, UserList } from './components/UserList/UserList';\nimport { Details } from './components/UserList/Details';\nimport { FetcherList } from './components/FetcherList/FetcherList';\nimport { fetchUrls } from './constants/urls';\n\nimport './styles/app.css';\n\nexport const App = () => {\n  const [users, setUsers] = useState([]);\n  const [info, setInfo] = useState(null);\n\n  const onUserClick = ({ id, name }) => {\n    if (id !== info?.id) {\n      setInfo({ id, name });\n    }\n  };\n\n  useEffect(() => {\n    fetch(process.env.REACT_APP_USERS_URL)\n      .then((response) => response.json())\n      .then((data) => {\n        setUsers(data);\n      });\n  }, []);\n\n  return (\n    <>\n      <UserList>\n        <List users={users} onUserClick={onUserClick} selectedId={info?.id} />\n        {info && <Details info={info} />}\n      </UserList>\n      <FetcherList urls={fetchUrls} />\n    </>\n  );\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { App } from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}